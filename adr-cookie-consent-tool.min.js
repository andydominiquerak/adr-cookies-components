/*! Cookie Consent Script - v6 Author: Andy Dominique Rak Instagram: https://instagram.com/andydominiquerak */document.addEventListener("DOMContentLoaded",function(){/*! Cookie Consent Script - v6 Author: Andy Dominique Rak Instagram: https://instagram.com/andydominiquerak */const COOKIE_PREFIX='adr-cookie_',COOKIE_NAME=COOKIE_PREFIX+'consent',COOKIE_PERFORMANCE=COOKIE_PREFIX+'performance',COOKIE_PERSONALIZATION=COOKIE_PREFIX+'personalization',COOKIE_ADVERTISEMENT=COOKIE_PREFIX+'advertisement';let banner=document.querySelector('[adr-cookie="banner"]'),allowButton=document.querySelector('[adr-cookie="allow"]'),denyButton=document.querySelector('[adr-cookie="deny"]'),prefsButton=document.querySelector('[adr-cookie="prefs"]'),modalBg=document.querySelector('[adr-cookie="modal-bg"]'),modal=document.querySelector('[adr-cookie="modal"]'),modalCloseButton=document.querySelector('[adr-cookie="modal-close"]'),modalAllowButton=document.querySelector('[adr-cookie="modal-allow"]'),modalDenyButton=document.querySelector('[adr-cookie="modal-deny"]'),saveButton=document.querySelector('[adr-cookie="save"]'),editButton=document.querySelector('[adr-cookie="edit"]'),endpoint=modal?.getAttribute('adr-cookie-endpoint'),perfToggle=document.querySelector('[adr-cookie="perf"]'),perfSwitch=document.querySelector('[adr-cookie="perf-switch"]'),persToggle=document.querySelector('[adr-cookie="pers"]'),persSwitch=document.querySelector('[adr-cookie="pers-switch"]'),adToggle=document.querySelector('[adr-cookie="ad"]'),adSwitch=document.querySelector('[adr-cookie="ad-switch"]'),switchStates={perf:!1,pers:!1,ad:!1};const slideInAnimation=()=>{gsap.fromTo(banner,{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power2.out"})},slideOutAnimation=t=>{gsap.to(banner,{y:"100%",opacity:0,duration:.5,ease:"power2.in",onComplete:t})},showModal=()=>{console.log("Opening modal..."),gsap.set(modalBg,{display:'flex',opacity:0}),gsap.set(modal,{display:'flex',opacity:0,y:100}),gsap.to(modalBg,{opacity:1,duration:.5,ease:"power2.out"}),gsap.to(modal,{y:0,opacity:1,duration:.5,ease:"power2.out"})},hideModal=t=>{console.log("Closing modal..."),gsap.to(modal,{y:100,opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{gsap.set(modal,{display:'none'}),t&&t()}}),gsap.to(modalBg,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{gsap.set(modalBg,{display:'none'})}})};const setCookie=(n,t,e)=>{const o=new Date(Date.now()+864e5*e).toUTCString();document.cookie=`${n}=${t}; expires=${o}; path=/`,console.log(`Cookie set: ${n}=${t}`)};const getCookie=n=>{const t=document.cookie.split('; ').find(t=>t.startsWith(n+'='));return t?t.split('=')[1]:null};const sendConsentToEndpoint=data=>{if(!endpoint)return void console.warn("No endpoint defined for consent data.");fetch(endpoint,{method:'POST',headers:{"Content-Type":'application/json'},body:JSON.stringify(data)}).then(response=>{if(!response.ok)throw new Error("Failed to send consent data.");return response.json()}).then(data=>console.log("Consent data successfully sent:",data)).catch(error=>console.error("Error sending consent data:",error))};const saveSwitchStatesToCookies=()=>{const n=switchStates.perf?"Allowed":"Denied",t=switchStates.pers?"Allowed":"Denied",e=switchStates.ad?"Allowed":"Denied";return setCookie(COOKIE_PERFORMANCE,n,365),setCookie(COOKIE_PERSONALIZATION,t,365),setCookie(COOKIE_ADVERTISEMENT,e,365),setCookie(COOKIE_NAME,switchStates.perf||switchStates.pers||switchStates.ad?"Allowed":"Denied",365),console.log("Cookies saved:",{[COOKIE_PERFORMANCE]:n,[COOKIE_PERSONALIZATION]:t,[COOKIE_ADVERTISEMENT]:e,[COOKIE_NAME]:switchStates.perf||switchStates.pers||switchStates.ad?"Allowed":"Denied"}),sendConsentToEndpoint({consent:switchStates.perf||switchStates.pers||switchStates.ad?"Allowed":"Denied",performance:n,personalization:t,advertisement:e,timestamp:new Date().toISOString()}),switchStates.perf||switchStates.pers||switchStates.ad};const toggleSwitch=(e,o)=>{if(!e)return;const n=switchStates[o],t=n?"0%":"100%",s=n?"#ccc":modal?.getAttribute('adr-cookie-brand')||"#f5f500";gsap.to(e,{x:t,backgroundColor:s,duration:.3,ease:"power2.out"}),switchStates[o]=!n};const initBanner=()=>{const e=getCookie(COOKIE_NAME);e==="Allowed"?(gsap.set(banner,{display:'none'}),console.log("Consent granted. Banner hidden.")):(gsap.set(banner,{display:'flex'}),slideInAnimation(),console.log("No consent found. Banner displayed."))};allowButton.addEventListener('click',()=>{setCookie(COOKIE_NAME,"Allowed",365),setCookie(COOKIE_PERFORMANCE,"Allowed",365),setCookie(COOKIE_PERSONALIZATION,"Allowed",365),setCookie(COOKIE_ADVERTISEMENT,"Allowed",365),slideOutAnimation(()=>{gsap.set(banner,{display:'none'}),console.log("All cookies allowed. Banner hidden."),sendConsentToEndpoint({consent:"Allowed",performance:"Allowed",personalization:"Allowed",advertisement:"Allowed",timestamp:new Date().toISOString()})})}),denyButton.addEventListener('click',()=>{setCookie(COOKIE_NAME,"Denied",365),setCookie(COOKIE_PERFORMANCE,"Denied",365),setCookie(COOKIE_PERSONALIZATION,"Denied",365),setCookie(COOKIE_ADVERTISEMENT,"Denied",365),slideOutAnimation(()=>{gsap.set(banner,{display:'none'}),console.log("All cookies denied. Banner hidden."),sendConsentToEndpoint({consent:"Denied",performance:"Denied",personalization:"Denied",advertisement:"Denied",timestamp:new Date().toISOString()})})}),prefsButton.addEventListener('click',()=>{console.log("Preferences button clicked. Showing modal..."),slideOutAnimation(()=>{gsap.set(banner,{display:'none'}),showModal()})}),modalCloseButton.addEventListener('click',()=>{console.log("Modal closed without any choice. Reopening banner..."),hideModal(()=>{gsap.set(banner,{display:'flex'}),slideInAnimation()})}),saveButton.addEventListener('click',()=>{const e=saveSwitchStatesToCookies();hideModal(()=>{e?console.log("At least one cookie allowed. Banner will not reappear."):(console.log("No cookies allowed. Banner will reappear on refresh."),gsap.set(banner,{display:'flex'}))})}),editButton&&editButton.addEventListener('click',()=>{console.log("Edit button clicked. Opening modal..."),showModal()}),perfToggle?.addEventListener('click',()=>toggleSwitch(perfSwitch,"perf")),persToggle?.addEventListener('click',()=>toggleSwitch(persSwitch,"pers")),adToggle?.addEventListener('click',()=>toggleSwitch(adSwitch,"ad")),initBanner();});
