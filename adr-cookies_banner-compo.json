/*!
 * Cookie Consent Script - v6
 * Author: Andy Dominique Rak
 * Instagram: https://instagram.com/andydominiquerak
 */
const COOKIE_PREFIX="adr-cookie_",COOKIE_NAME=COOKIE_PREFIX+"consent",COOKIE_PERFORMANCE=COOKIE_PREFIX+"performance",COOKIE_PERSONALIZATION=COOKIE_PREFIX+"personalization",COOKIE_ADVERTISEMENT=COOKIE_PREFIX+"advertisement",banner=document.querySelector('[adr-cookie="banner"]'),allowButton=document.querySelector('[adr-cookie="allow"]'),denyButton=document.querySelector('[adr-cookie="deny"]'),prefsButton=document.querySelector('[adr-cookie="prefs"]'),modalBg=document.querySelector('[adr-cookie="modal-bg"]'),modal=document.querySelector('[adr-cookie="modal"]'),modalCloseButton=document.querySelector('[adr-cookie="modal-close"]'),saveButton=document.querySelector('[adr-cookie="save"]'),editButton=document.querySelector('[adr-cookie="edit"]'),perfToggle=document.querySelector('[adr-cookie="perf"]'),perfSwitch=document.querySelector('[adr-cookie="perf-switch"]'),persToggle=document.querySelector('[adr-cookie="pers"]'),persSwitch=document.querySelector('[adr-cookie="pers-switch"]'),adToggle=document.querySelector('[adr-cookie="ad"]'),adSwitch=document.querySelector('[adr-cookie="ad-switch"]'),switchStates={perf:!1,pers:!1,ad:!1},slideInAnimation=()=>{gsap.fromTo(banner,{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power2.out"})},slideOutAnimation=e=>{gsap.to(banner,{y:"100%",opacity:0,duration:.5,ease:"power2.in",onComplete:e})},showModal=()=>{gsap.set(modalBg,{display:"flex",opacity:0}),gsap.set(modal,{display:"flex",opacity:0,y:100}),gsap.to(modalBg,{opacity:1,duration:.5,ease:"power2.out"}),gsap.to(modal,{y:0,opacity:1,duration:.5,ease:"power2.out"})},hideModal=e=>{gsap.to(modal,{y:100,opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{gsap.set(modal,{display:"none"}),e&&e()}}),gsap.to(modalBg,{opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{gsap.set(modalBg,{display:"none"})}})},setCookie=(e,t,o)=>{const n=new Date(Date.now()+864e5*o).toUTCString();document.cookie=`${e}=${t}; expires=${n}; path=/`},getCookie=e=>{const t=document.cookie.split("; ").find(t=>t.startsWith(e+"="));return t?t.split("=")[1]:null},CATEGORY_TO_COOKIE={essential:null,performance:COOKIE_PERFORMANCE,personalization:COOKIE_PERSONALIZATION,marketing:COOKIE_ADVERTISEMENT,advertisement:COOKIE_ADVERTISEMENT},runConsentScripts=function(){document.querySelectorAll("script[adr-cc]").forEach(e=>{const t=e.getAttribute("adr-cc"),o=!CATEGORY_TO_COOKIE[t]||getCookie(CATEGORY_TO_COOKIE[t])==="Allowed";if(e.getAttribute("data-adr-cc-loaded")==="1")return;if(o){const o=document.createElement("script");for(const{ name:t,value:n}of e.attributes)!/^adr-cc$|^data-adr-cc-loaded$/.test(t)&&o.setAttribute(t,n);o.text=e.text,e.setAttribute("data-adr-cc-loaded","1"),e.parentNode.insertBefore(o,e.nextSibling)}})},handleConsentChange=function(){runConsentScripts()},saveSwitchStatesToCookies=()=>{const e=switchStates.perf?"Allowed":"Denied",t=switchStates.pers?"Allowed":"Denied",o=switchStates.ad?"Allowed":"Denied";setCookie(COOKIE_PERFORMANCE,e,365),setCookie(COOKIE_PERSONALIZATION,t,365),setCookie(COOKIE_ADVERTISEMENT,o,365);const n=switchStates.perf||switchStates.pers||switchStates.ad?"Allowed":"Denied";return setCookie(COOKIE_NAME,n,365),handleConsentChange(),n==="Allowed"},toggleSwitch=(e,t)=>{if(!e)return;const o=switchStates[t],n=o?"0%":"100%",i=o?"#ccc":modal?.getAttribute("adr-cookie-brand")||"#f5f500";gsap.to(e,{x:n,backgroundColor:i,duration:.3,ease:"power2.out"}),switchStates[t]=!o},initBanner=()=>{getCookie(COOKIE_NAME)==="Allowed"?gsap.set(banner,{display:"none"}):(gsap.set(banner,{display:"flex"}),slideInAnimation()),handleConsentChange()};allowButton.addEventListener("click",()=>{setCookie(COOKIE_NAME,"Allowed",365),setCookie(COOKIE_PERFORMANCE,"Allowed",365),setCookie(COOKIE_PERSONALIZATION,"Allowed",365),setCookie(COOKIE_ADVERTISEMENT,"Allowed",365),handleConsentChange(),slideOutAnimation(()=>{gsap.set(banner,{display:"none"})})}),denyButton.addEventListener("click",()=>{setCookie(COOKIE_NAME,"Denied",365),setCookie(COOKIE_PERFORMANCE,"Denied",365),setCookie(COOKIE_PERSONALIZATION,"Denied",365),setCookie(COOKIE_ADVERTISEMENT,"Denied",365),handleConsentChange(),slideOutAnimation(()=>{gsap.set(banner,{display:"none"})})}),prefsButton.addEventListener("click",()=>{slideOutAnimation(()=>{gsap.set(banner,{display:"none"}),showModal()})}),modalCloseButton.addEventListener("click",()=>{hideModal(()=>{gsap.set(banner,{display:"flex"}),slideInAnimation()})}),saveButton.addEventListener("click",()=>{saveSwitchStatesToCookies(),hideModal(()=>{switchStates.perf||switchStates.pers||switchStates.ad?gsap.set(banner,{display:"none"}):0})}),editButton&&editButton.addEventListener("click",()=>{showModal()}),perfToggle?.addEventListener("click",()=>toggleSwitch(perfSwitch,"perf")),persToggle?.addEventListener("click",()=>toggleSwitch(persSwitch,"pers")),adToggle?.addEventListener("click",()=>toggleSwitch(adSwitch,"ad")),initBanner();
